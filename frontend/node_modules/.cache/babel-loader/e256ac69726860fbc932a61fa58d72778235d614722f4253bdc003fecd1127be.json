{"ast":null,"code":"import{Fragment,useState}from'react';import{Link}from'react-router-dom';import{toast}from'react-toastify';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function Cart(_ref){let{cartItems,setCartItems}=_ref;const[complete,setComplete]=useState(false);function increaseQty(item){if(item.product.stock==item.qty){return;}const updatedItems=cartItems.map(i=>{if(i.product._id==item.product._id){i.qty++;}return i;});setCartItems(updatedItems);}function decreaseQty(item){if(item.qty>1){const updatedItems=cartItems.map(i=>{if(i.product._id==item.product._id){i.qty--;}return i;});setCartItems(updatedItems);}}function remItem(item){const updatedItems=cartItems.filter(i=>{if(i.product._id!==item.product._id){return true;}});setCartItems(updatedItems);}function placeOrderHandler(){fetch(process.env.REACT_APP_API_URL+'/orders/',{method:'POST',headers:{'content-Type':'application/json'},body:JSON.stringify(cartItems)}).then(()=>{setCartItems([]);setComplete(true);toast.success(\"order success!!!\");});}return cartItems.length>0?/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{class:\"container container-fluid\",children:[/*#__PURE__*/_jsxs(\"h2\",{class:\"mt-5\",children:[\"Your Cart: \",/*#__PURE__*/_jsxs(\"b\",{children:[cartItems.length,\" items\"]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-12 col-lg-8\",children:cartItems.map(item=>/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{class:\"cart-item\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-4 col-lg-3\",children:/*#__PURE__*/_jsx(\"img\",{src:item.product.images[0].image,alt:\"Laptop\",height:\"90\",width:\"115\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-5 col-lg-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\"+item.product._id,children:item.product.name})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-4 col-lg-2 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsx(\"p\",{id:\"card_item_price\",children:item.product.price})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-4 col-lg-3 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"stockCounter d-inline\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"btn btn-danger minus\",onClick:()=>decreaseQty(item),children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",class:\"form-control count d-inline\",value:item.qty,readOnly:true}),/*#__PURE__*/_jsx(\"span\",{class:\"btn btn-primary plus\",onClick:()=>increaseQty(item),children:\"+\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-4 col-lg-1 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsx(\"i\",{id:\"delete_cart_item\",class:\"fa fa-trash btn btn-danger\",onClick:()=>remItem(item)})})]})})]}))}),/*#__PURE__*/_jsx(\"div\",{class:\"col-12 col-lg-3 my-4\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"order_summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal:  \",/*#__PURE__*/_jsxs(\"span\",{class:\"order-summary-values\",children:[cartItems.reduce((acc,item)=>item.qty+acc,0),\" (Units)\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Est. total: \",/*#__PURE__*/_jsxs(\"span\",{class:\"order-summary-values\",children:[\"$\",cartItems.reduce((acc,item)=>item.qty*item.product.price+acc,0)]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"checkout_btn\",class:\"btn btn-primary btn-block\",onClick:placeOrderHandler,children:\"Place Order\"})]})})]})]})}):!complete?/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5\",children:\"Your cart is empty\"}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order complete!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"your order placed successfully\"})]});}","map":{"version":3,"names":["Fragment","useState","Link","toast","jsxs","_jsxs","jsx","_jsx","Cart","_ref","cartItems","setCartItems","complete","setComplete","increaseQty","item","product","stock","qty","updatedItems","map","i","_id","decreaseQty","remItem","filter","placeOrderHandler","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","then","success","length","children","class","src","images","image","alt","height","width","to","name","id","price","onClick","type","value","readOnly","reduce","acc","className"],"sources":["D:/web/react/mini-ecommerce/frontend/src/pages/Cart.js"],"sourcesContent":["import {Fragment, useState} from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default function Cart({cartItems,setCartItems}){\r\n    const [complete,setComplete]=useState(false);\r\n\r\n\r\n    function increaseQty(item){\r\n        if(item.product.stock==item.qty){\r\n           return\r\n        }\r\n        const updatedItems=cartItems.map((i)=>{\r\n            if(i.product._id==item.product._id){\r\n                i.qty++\r\n            }\r\n            return i;\r\n        })\r\n        setCartItems(updatedItems)\r\n       }\r\n\r\n       function decreaseQty(item){\r\n        if(item.qty>1){\r\n           const updatedItems=cartItems.map((i)=>{\r\n            if(i.product._id==item.product._id){\r\n                i.qty--\r\n            }\r\n            return i;\r\n        })\r\n        setCartItems(updatedItems)\r\n        }\r\n        \r\n       }\r\n\r\n       function remItem(item){\r\n        const updatedItems=cartItems.filter((i)=>{\r\n            if(i.product._id!==item.product._id){\r\n                return true\r\n            }\r\n        })\r\n        setCartItems(updatedItems)\r\n       }\r\n\r\n       function placeOrderHandler(){\r\n        fetch(process.env.REACT_APP_API_URL+'/orders/',{\r\n            method:'POST',\r\n            headers:{'content-Type':'application/json'},\r\n            body:JSON.stringify(cartItems)\r\n        })\r\n        .then(()=>{\r\n            setCartItems([]);\r\n            setComplete(true);\r\n            toast.success(\"order success!!!\")\r\n        })\r\n       }\r\n\r\n    return cartItems.length > 0 ?<Fragment>\r\n               <div class=\"container container-fluid\">\r\n    <h2 class=\"mt-5\">Your Cart: <b>{cartItems.length} items</b></h2>\r\n    <div class=\"row d-flex justify-content-between\">\r\n       <div class=\"col-12 col-lg-8\">\r\n       {cartItems.map((item)=>(\r\n       <Fragment>\r\n          <hr />\r\n          <div class=\"cart-item\">\r\n              <div class=\"row\">\r\n                  <div class=\"col-4 col-lg-3\">\r\n                   <img src={item.product.images[0].image} alt=\"Laptop\" height=\"90\" width=\"115\"/>\r\n                  </div>\r\n\r\n                  <div class=\"col-5 col-lg-3\">\r\n                   <Link to={\"/product/\"+item.product._id}>{item.product.name}</Link>\r\n                  </div>\r\n\r\n\r\n                  <div class=\"col-4 col-lg-2 mt-4 mt-lg-0\">\r\n                   <p id=\"card_item_price\">{item.product.price}</p>\r\n                  </div>\r\n\r\n                  <div class=\"col-4 col-lg-3 mt-4 mt-lg-0\">\r\n                      <div class=\"stockCounter d-inline\">\r\n                       <span class=\"btn btn-danger minus\" onClick={()=>decreaseQty(item)}>-</span>\r\n                       <input type=\"number\" class=\"form-control count d-inline\" value={item.qty} readOnly />\r\n\r\n                       <span class=\"btn btn-primary plus\" onClick={()=>increaseQty(item)}>+</span>\r\n                      </div>\r\n                  </div>\r\n\r\n                  <div class=\"col-4 col-lg-1 mt-4 mt-lg-0\">\r\n                   <i id=\"delete_cart_item\" class=\"fa fa-trash btn btn-danger\" onClick={()=>remItem(item)}></i>\r\n                  </div>\r\n\r\n              </div>\r\n          </div>\r\n      </Fragment>\r\n      ))}\r\n      </div>\r\n\r\n      <div class=\"col-12 col-lg-3 my-4\">\r\n          <div id=\"order_summary\">\r\n          <h4>Order Summary</h4>\r\n          <hr />\r\n          <p>Subtotal:  <span class=\"order-summary-values\">{cartItems.reduce((acc,item)=>(item.qty+acc),0)} (Units)</span></p>\r\n          <p>Est. total: <span class=\"order-summary-values\">${cartItems.reduce((acc,item)=>((item.qty * item.product.price)+acc),0)}</span></p>\r\n\r\n          <hr />\r\n          <button id=\"checkout_btn\" class=\"btn btn-primary btn-block\" onClick={placeOrderHandler}>Place Order</button>\r\n          </div>\r\n      </div>\r\n      </div>\r\n\r\n               </div>\r\n            </Fragment>:(!complete ? <h2 className='mt-5'>Your cart is empty</h2> : <Fragment><h2>Order complete!</h2>\r\n                <p>your order placed successfully</p></Fragment>)\r\n    \r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}