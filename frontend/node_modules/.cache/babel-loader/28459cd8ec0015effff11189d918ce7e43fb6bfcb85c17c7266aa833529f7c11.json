{"ast":null,"code":"import{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductDetails(_ref){let{cartItems,setCartItems}=_ref;const[product,setProduct]=useState(null);const[qty,setQty]=useState(1);const{id}=useParams();useEffect(()=>{fetch(process.env.REACT_APP_API_URL+'/products/'+id).then(res=>res.json()).then(res=>setProduct(res.product));},[]);function addToCart(){const itemExist=cartItems.find(item=>item.product._id==product._id);if(!itemExist){const newItem={product,qty};setCartItems(state=>[...state,newItem]);toast.success(\"Cart Item added succesfully!\");}}function increaseQty(){if(product.stock==qty){return;}setQty(state=>state+1);}function decreaseQty(){if(qty>1){setQty(state=>state-1);}}return product&&/*#__PURE__*/_jsx(\"div\",{className:\"container container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row f-flex justify-content-around\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-5 img-fluid\",id:\"product_image\",children:/*#__PURE__*/_jsx(\"img\",{src:product.images[0].image,alt:\"sdf\",height:\"500\",width:\"500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-5 mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{id:\"product_id\",children:[\"Product #\",product._id]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"rating-outer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rating-inner\",style:{width:`${product.ratings/5*100}%`}})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{id:\"product_price\",children:product.price}),/*#__PURE__*/_jsxs(\"div\",{className:\"stockCounter d-inline\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-danger minus\",onClick:decreaseQty,children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control count d-inline\",value:qty,readOnly:true}),/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-primary plus\",onClick:increaseQty,children:\"+\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addToCart,disabled:product.stock==0,id:\"cart_btn\",className:\"btn btn-primary d-inline ml-4\",children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",/*#__PURE__*/_jsx(\"span\",{id:\"stock_status\",className:product.stock>0?'text-success':'text-danger',children:product.stock>0?'In Stock':'out of stock'})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-2\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{id:\"product_seller mb-3\",children:[\"Sold by: \",/*#__PURE__*/_jsx(\"strong\",{children:product.seller})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rating w-50\"})]})]})});}","map":{"version":3,"names":["useState","useEffect","useParams","toast","jsx","_jsx","jsxs","_jsxs","ProductDetails","_ref","cartItems","setCartItems","product","setProduct","qty","setQty","id","fetch","process","env","REACT_APP_API_URL","then","res","json","addToCart","itemExist","find","item","_id","newItem","state","success","increaseQty","stock","decreaseQty","className","children","src","images","image","alt","height","width","name","style","ratings","price","onClick","type","value","readOnly","disabled","description","seller"],"sources":["D:/web/react/mini-ecommerce/frontend/src/pages/productDetails.js"],"sourcesContent":["import {useState,useEffect} from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport {toast} from 'react-toastify';\r\n\r\n\r\nexport default function ProductDetails({cartItems,setCartItems}){\r\n   const [product,setProduct]=useState(null);\r\n   const [qty,setQty]=useState(1)\r\n   const {id}=useParams();\r\n\r\n   useEffect(()=>{\r\n      fetch(process.env.REACT_APP_API_URL+'/products/'+id)\r\n      .then((res)=>res.json())\r\n      .then((res)=>setProduct(res.product))\r\n   },[])\r\n   \r\n   function addToCart() {\r\n      const itemExist = cartItems.find((item) => item.product._id == product._id)\r\n      if (!itemExist) {\r\n          const newItem = {product, qty};\r\n          setCartItems((state) => [...state, newItem]);\r\n          toast.success(\"Cart Item added succesfully!\")\r\n      }\r\n  }\r\n\r\n  function increaseQty(){\r\n   if(product.stock==qty){\r\n      return\r\n   }\r\n   setQty((state)=>state+1)\r\n  }\r\n  function decreaseQty(){\r\n   if(qty>1){\r\n      setQty((state)=>state-1)\r\n   }\r\n   \r\n  }\r\n\r\n    return product && <div className=\"container container-fluid\">\r\n              <div className=\"row f-flex justify-content-around\">\r\n                <div className=\"col-12 col-lg-5 img-fluid\" id=\"product_image\">\r\n                   <img src={product.images[0].image} alt=\"sdf\" height=\"500\" width=\"500\"/>\r\n                </div>\r\n\r\n                <div className=\"col-12 col-lg-5 mt-5\">\r\n                   <h3>{product.name}</h3>\r\n                   <p id=\"product_id\">Product #{product._id}</p>\r\n\r\n                   <hr/>\r\n\r\n                   <div className=\"rating-outer\">\r\n                       <div className=\"rating-inner\" style={{width:`${product.ratings/5 * 100}%`}}></div>\r\n                   </div>\r\n       \r\n                   <hr/>\r\n\r\n                   <p id=\"product_price\">{product.price}</p>\r\n                   <div className=\"stockCounter d-inline\">\r\n                   <span className=\"btn btn-danger minus\" onClick={decreaseQty}>-</span>\r\n\r\n                   <input type=\"number\" className=\"form-control count d-inline\" value={qty} readOnly />\r\n\r\n                   <span className=\"btn btn-primary plus\" onClick={increaseQty}>+</span>\r\n                   </div>\r\n                   <button type=\"button\" onClick={addToCart} disabled={product.stock==0} id=\"cart_btn\" className=\"btn btn-primary d-inline ml-4\">Add to Cart</button>\r\n\r\n                   <hr/>\r\n\r\n                   <p>Status: <span id=\"stock_status\" className={product.stock>0?'text-success':'text-danger'}>{product.stock>0?'In Stock':'out of stock'}</span></p>\r\n\r\n                   <hr/>\r\n\r\n                   <h4 className=\"mt-2\">Description:</h4>\r\n                   <p>{product.description}</p>\r\n                   <hr/>\r\n                   <p id=\"product_seller mb-3\">Sold by: <strong>{product.seller}</strong></p>\r\n            \r\n                   <div className=\"rating w-50\"></div>\r\n                    \r\n                </div>\r\n\r\n               </div>\r\n\r\n            </div>\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}